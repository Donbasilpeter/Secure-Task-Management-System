<div class="min-h-screen bg-secondary/5 font-body p-8">
  <div class="max-w-4xl mx-auto bg-white rounded-card shadow-card p-6">
    <ng-container *ngIf="organisationStore.currentOrg() as org; else noOrg">
      <h1 class="text-2xl font-heading font-bold text-primary mb-6">
        {{ org.name }}
      </h1>

      <p class="text-sm text-gray-600 mb-4">
        <span class="font-medium">Role:</span> {{ org.role || 'â€”' }} |
        <span class="font-medium">Created:</span>
        {{ org.createdAt | date: 'mediumDate' }} |
        <span class="font-medium">Departments:</span> {{ departments().length }}
      </p>

      <!-- Departments Section -->
      <div class="mb-6">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-lg font-heading font-semibold text-primary">
            Departments
          </h2>
          <button
            *ngIf="org.role === 'owner' && !showCreateDeptForm"
            (click)="showCreateDeptForm = true"
            class="px-4 py-2 text-sm bg-primary text-white rounded-button shadow hover:bg-primary-dark transition"
          >
            + New Department
          </button>
        </div>

        <!-- Create Department Form -->
        <div
          *ngIf="showCreateDeptForm"
          class="mb-4 bg-gray-50 border border-tertiary/20 rounded p-4"
        >
          <form
            [formGroup]="deptForm"
            (ngSubmit)="onCreateDepartment()"
            class="flex gap-3 flex-col sm:flex-row"
          >
            <input
              formControlName="name"
              type="text"
              placeholder="Department name"
              class="flex-1 px-3 py-2 border rounded focus:ring-2 focus:ring-primary"
            />

            <div class="flex gap-2">
              <button
                type="submit"
                class="px-4 py-2 bg-primary text-white rounded-button shadow hover:bg-primary-dark transition"
              >
                Save
              </button>
              <button
                type="button"
                (click)="cancelCreateDepartment()"
                class="px-4 py-2 bg-gray-300 text-gray-800 rounded-button shadow hover:bg-gray-400 transition"
              >
                Cancel
              </button>
            </div>
          </form>
        </div>

        <!-- Departments List -->
        <ul class="space-y-3">
          <li
            *ngFor="let dept of departments()"
            class="p-4 bg-secondary/10 rounded shadow-sm flex justify-between items-center"
          >
            <div>
              <p class="font-medium text-primary">{{ dept.name }}</p>
              <p class="text-xs text-gray-600 mt-1">
                Role: <span class="font-medium">{{ dept.role }}</span>
              </p>
            </div>

            <button
              class="px-3 py-1 text-sm bg-secondary text-white rounded shadow hover:bg-secondary-dark transition"
            >
              Open
            </button>
          </li>
        </ul>
      </div>
    </ng-container>

    <ng-template #noOrg>
      <p class="text-gray-500">Organisation not found.</p>
    </ng-template>
  </div>
</div>
